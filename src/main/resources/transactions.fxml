<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.group_2.ui.TransactionsController"
           styleClass="dashboard-root"
           stylesheets="@/styles.css"
           prefWidth="1000" prefHeight="700">

    <!-- Main Content BorderPane -->
    <BorderPane>
        <!-- Top Header -->
        <top>
            <HBox styleClass="navbar" spacing="20" alignment="CENTER_LEFT">
                <Button text="â† Back" onAction="#backToHome" styleClass="navbar-back-button"/>
                <Text text="ðŸ’° Transactions" styleClass="navbar-title"/>
                <Region HBox.hgrow="ALWAYS"/>
            </HBox>
        </top>

        <!-- Main Content -->
        <center>
            <ScrollPane fitToWidth="true" styleClass="scroll-pane">
                <VBox styleClass="main-content" spacing="30" style="-fx-padding: 30;">
                    
                    <!-- Page Header -->
                    <VBox styleClass="content-header" spacing="8">
                        <Text text="Transaction Management" styleClass="page-title"/>
                        <Text text="Track shared expenses and balances with your flatmates" styleClass="page-subtitle"/>
                    </VBox>

                    <!-- Total Balance Card -->
                    <VBox fx:id="balanceCard" styleClass="card" spacing="15" style="-fx-background-color: linear-gradient(to bottom right, #3b82f6, #2563eb); -fx-padding: 25;">
                        <Text text="Your Total Balance" style="-fx-font-size: 14px; -fx-fill: rgba(255,255,255,0.9); -fx-font-weight: 500;"/>
                        <Text fx:id="totalBalanceText" text="â‚¬0.00" 
                              style="-fx-font-size: 42px; -fx-font-weight: bold; -fx-fill: white;"/>
                        <Text text="Sum of all balances with WG members" style="-fx-font-size: 12px; -fx-fill: rgba(255,255,255,0.7);"/>
                    </VBox>

                    <!-- Balance Sheet Table -->
                    <VBox styleClass="card" spacing="20">
                        <HBox alignment="CENTER_LEFT">
                            <Text text="ðŸ’³ Balance Sheet" styleClass="card-title"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="ðŸ“œ History" onAction="#navigateToHistory" 
                                    style="-fx-background-color: #f3f4f6; -fx-text-fill: #374151; -fx-background-radius: 8; -fx-padding: 10 20; -fx-cursor: hand; -fx-font-weight: 600; -fx-font-size: 13px;"/>
                            <Region prefWidth="10"/>
                            <Button text="+ Add Transaction" styleClass="primary-button" onAction="#showAddTransactionDialog" style="-fx-padding: 10 20;"/>
                        </HBox>
                        
                        <Text text="Your balances with each WG member" styleClass="card-subtitle"/>
                        
                        <TableView fx:id="balanceTable" fixedCellSize="50" styleClass="table-view">
                            <columnResizePolicy>
                                <TableView fx:constant="UNCONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>


    
                            <columns>
                                <TableColumn fx:id="memberColumn" text="Member" prefWidth="400" minWidth="300" maxWidth="500" 
                                             resizable="false"/>
                                <TableColumn fx:id="balanceColumn" text="Balance" prefWidth="200" minWidth="150" maxWidth="250" 
                                             resizable="false"/>
                            </columns>

                        </TableView>
                    </VBox>

                </VBox>

            </ScrollPane>
        </center>
    </BorderPane>

    <!-- Transaction Dialog Overlay -->
    <fx:include source="transaction_dialog.fxml" fx:id="transactionDialog"/>

</StackPane>

